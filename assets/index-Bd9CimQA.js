import{g as y,_ as k,a as S,b as E,c as A,d as N,m as q,f as I,p as L,e as V,v as F,j as H,k as T,i as j}from"./_plugin-vue_export-helper-DB_0OTpT.js";import{d as g,r as d,f as x,w as C,g as M,c as m,a as s,b as u,e as i,n as _,F as $,h as z,i as v,o as h,t as B,j as D}from"./index-CAXPIJzj.js";const Z={class:"view"},G={class:"content lg:w-[98%] lg:max-w-[1300px] max-lg:w-full ml-auto mr-auto pl-1 pr-1 flex"},P={class:"w-full p-2 flex-[9]"},J={class:v(["bg-white","rounded-xl","pl-10","pr-10","pt-[50px]","pb-[50px]","viewer","max-lg:w-[100%]"])},K={class:"flex-[4] rounded-lg mb-5 bg-white h-4/5 overflow-y-auto m-2 max-lg:hidden top-0 sticky max-w-[350px]"},O={class:"w-full p-2"},Q=["index","href"],R=g({__name:"viewer",props:{data:{type:String,required:!0,default:"",theme:"dark"},theme:{type:String}},setup(o){let n=d(100),p=d(),c=d(0);const f=function(t){if(t.target&&t.target.nodeName==="A"){t.preventDefault(),c.value=t.target.getAttribute("index")*1;let l=t.target.getAttribute("href");document.querySelector(l).scrollIntoView({behavior:"smooth"})}},w=function(t){let l=Array.isArray(t)?t:[t],a=null;for(;l.length;){const e=l.shift();if(e.type==="text"){a=e.value;break}for(let r=0;r<=e.children.length-1;r++)l.push(e.children[r])}return a};x(()=>{let t=document.querySelector(".markdown-body"),l=t==null?void 0:t.querySelectorAll("h1, h2, h3, h4, h5, h6");document.querySelector(".view").addEventListener("scroll",function(a){l==null||l.forEach((e,r)=>{e.nodeName[0]==="H"&&e.offsetTop-document.querySelector(".view").scrollTop<120&&(c.value=r)})}),l==null||l.forEach((a,e)=>{a.nodeName[0]==="H"&&a.setAttribute("id",`head-${e}`)}),document.querySelector(".mulu-content").addEventListener("click",f)}),C(()=>{H({plugins:[{rehype:t=>t.use(()=>l=>{let a=[];l.children.filter(e=>e.type==="element").forEach(e=>{if(e.tagName[0]==="h"&&e.children.length){const r=Number(e.tagName[1]);n.value=Math.min(n.value,r),a.push({level:r,text:w(e)})}}),p.value=a})}]}).processSync(o.data)}),M(()=>o.theme,t=>{D(()=>t&&T(t))},{immediate:!0});const b=[y({locale:L}),k(),S(),E(),A(),N(),q({locale:V}),I()];return(t,l)=>(h(),m("div",Z,[l[1]||(l[1]=s("header",{class:"h-[400px] bg-black"},null,-1)),s("main",G,[s("div",P,[s("div",J,[u(i(F),{value:o.data,plugins:b},null,8,["value"])])]),s("div",K,[s("div",O,[l[0]||(l[0]=s("div",{class:"mulu-top ml-5 mr-5 h-14 leading-[56px] text-base border-[#e4e6eb] border-solid border-b-[1px]"}," 目录 ",-1)),s("ul",{class:"mulu-content flex flex-col mt-3 relative",onClick:f},[s("li",{class:"absolute top-0 left-0 w-[3px] h-[14px] bg-[#1E80FF]",style:_({top:i(c)*36+11+"px",transition:"all 0.3s ease"})},null,4),(h(!0),m($,null,z(i(p),(a,e)=>(h(),m("li",{class:"mulu-item h-9 fl",style:_({"padding-left":(a.level-i(n)+1)*16+"px"})},[s("a",{index:e,href:"#head-"+e,class:v(["block","pl-2","h-full"," leading-9","text-[#515767]","text-sm]",i(c)===e?"active":""])},B(a.text),11,Q)],4))),256))])])])])]))}}),U=j(R,[["__scopeId","data-v-4abcf0e6"]]),W="_viewer_w5c5u_1",X="_cont_w5c5u_9",Y={viewer:W,cont:X},ae=g({name:"Viewer",setup(){let o=localStorage.getItem("content")||"",n=localStorage.getItem("theme")||"light";return x(async()=>{}),()=>u("div",{class:[Y.cont,"h-full"]},[u("div",{class:["overflow-hidden","h-full"]},[u(U,{data:o,theme:n},null)])])}});export{ae as default};
